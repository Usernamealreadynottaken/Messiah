{% extends "Hotel/base.html" %}

{% load staticfiles %}

{% block title %}Hotel Messiah - Rezerwacje{% endblock %}

{% block content %}

<div id="reservations">

    <div class="title">
        <h1>Rezerwacje</h1>
    </div> <!-- .title -->

    <div class="reservations-content">

        <form action="" method="post">
            {% csrf_token %}

            <table>
                <tr>
                    <td>Imie i nazwisko:</td>
                    <td colspan="3"><input type="text" name="name"></td>
                </tr>
                <tr>
                    <td>Telefon:</td>
                    <td colspan="3"><input type="tel" name="tel"></td>
                </tr>
                <tr>
                    <td>E-mail:</td>
                    <td colspan="3"><input type="email" name="email"></td>
                </tr>
                <tr>
                    <td>Poczatek pobytu:</td>
                    <td colspan="3"><input class="date-from" type="text" name="date-from"></td>
                </tr>
                <tr>
                    <td>Koniec pobytu:</td>
                    <td colspan="3"><input class="date-to" type="text" name="date-to"></td>
                </tr>
                <tr>
                    <td>Liczba pokoi:</td>
                    <td colspan="3">
                        <select class="rooms" name="rooms">
                            <option value="1">1 Pokoj</option>
                            <option value="2">2 Pokoje</option>
                            <option value="3">3 Pokoje</option>
                        </select>
                    </td>
                </tr>
                <tr class="room1">
                    <td>Dorosli:</td>
                    <td>
                        <select name="adults1">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td>Dzieci:</td>
                    <td>
                        <select name="kids1">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                </tr>
                <tr class="room2">
                    <td>Dorosli:</td>
                    <td>
                        <select name="adults2">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td>Dzieci:</td>
                    <td>
                        <select name="kids2">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                </tr>
                <tr class="room3">
                    <td>Dorosli:</td>
                    <td>
                        <select name="adults3">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                    <td>Dzieci:</td>
                    <td>
                        <select name="kids3">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                </tr>
            </table>

            <div class="calendars">
                <div class="calendar-from">
                    <p>Wybierz date przyjazdu</p>
                    <div class="datepicker-from"></div>
                </div>
                <div class="calendar-to">
                    <p>Wybierz date wyjazdu</p>
                    <div class="datepicker-to"></div>
                </div>

            </div> <!-- .calendars -->

            <!-- ponizsze 2 sa tylko do testowania ajaxa -->
            {% comment %}
            <label id="clickity">CLICK</label>
            <p id="message">
                {% for p in pokoje %}
                {{ p.pk }} - {{ p.opis_combo }}<br />
                {% endfor %}
            </p>
            {% endcomment %}

            <div class="additions">
                <h2>Wybierz dodatki
                    <img src="{% static 'Hotel/img/placeholder.png' %}" alt="arrow"/></h2>

                <div class="in">
                    <h3>Uslugi wewnetrze: </h3>
                    <ul>
                        <label>
                            <input type="checkbox" name="in1" value="in1"> Option1
                        </label><br>
                        <label>
                            <input type="checkbox" name="in2" value="in2"> Option2
                        </label><br>
                        <label>
                            <input type="checkbox" name="in3" value="in3"> Option3
                        </label><br>
                    </ul>
                </div> <!-- .in -->

                <div class="out">
                    <h3>Uslugi zewnetrzne: </h3>
                    <ul>
                        <label>
                            <input type="checkbox" name="out1" value="out1"> Option1
                        </label><br>
                        <label>
                            <input type="checkbox" name="out2" value="out2"> Option2
                        </label><br>
                        <label>
                            <input type="checkbox" name="out3" value="out3"> Option3
                        </label><br>
                        <label>
                            <input type="checkbox" name="out1" value="out1"> Option1
                        </label><br>
                        <label>
                            <input type="checkbox" name="out2" value="out2"> Option2
                        </label><br>
                        <label>
                            <input type="checkbox" name="out3" value="out3"> Option3
                        </label><br>
                    </ul>
                </div> <!-- .out -->

            </div> <!-- .additions -->

            <div class="summary">
                <h3>Twoje zyczenia</h3>
                <textarea rows="4" cols="50"></textarea>
                <p>Cena pobytu za wynajem x pokoi na y nocy:
                    <input class="price" type="text" name="price" disabled="disabled"></p>
                <a href="">Zarezerwuj</a>
            </div>

        </form>

    </div> <!-- .reservations.content -->

</div> <!-- .reservations -->

{% endblock %}

{% block scripts %}

<!-- skrypt jest wysoce tymczasowy, tylko do testowania ajaxa -->
<script>
function ajaxTest() {
    $.ajax({
        type: 'GET',
        dataType: 'html',
        url: 'http://127.0.0.1:8000/rezerwacje/check',
        data: {
            csrfdmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value,
            pokoj: $("#pokoj").val()
        }
    })
        .done(function(data) {
            $("#message").html(data + "<br /><br />");
        })
        .fail(function(xhr, textStatus, errorThrown) {
            alert("Error: " + errorThrown + xhr.status + xhr.responseText);
        });
}

document.getElementById("clickity").onclick = function() {
    ajaxTest();
}
</script>

{% endblock %}